<html lang="ja" data-theme="dark">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Sync Timer</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css"
    />
    <style>
      body {
        text-align: center;
      }
    </style>
  </head>
  <body>
    <header class="hero is-info">
      <div class="hero-body container">
        <h1 class="title">Sync Timer</h1>
        <p class="subtitle">同時視聴配信のためのシンプルなタイマー</p>
        <div>
          <a class="button" href="https://sync-timer.netlify.app/"
            >アプリを開く</a
          >
        </div>
      </div>
    </header>
    <main>
      <section class="section">
        <div class="container">
          <h2 class="title">Sync Timer とは？</h2>
          <p>
            YouTubeなどでファンと一緒に映画などの同時視聴配信を行うときに使えるタイマーです。
          </p>
          <p>ブラウザのみで動作し、ログイン不要でどなたでも無料で使えます。</p>
        </div>
      </section>
      <section class="section">
        <div class="container">
          <h2 class="title">特徴</h2>
          <div class="columns">
            <div class="column">
              <figure class="image is-16by9">
                <img src="images/SyncTimer1.webp" alt="SyncTimer1" />
              </figure>
              <p class="is-size-4"><strong>マイナスから開始できる</strong></p>
              <ul>
                <li>開始タイミングを合わせやすい</li>
                <li>動画の開始まで余裕ができる</li>
              </ul>
            </div>
            <div class="column">
              <figure class="image is-16by9">
                <img src="images/SyncTimer2.webp" alt="SyncTimer2" />
              </figure>
              <p><strong>クロマキー合成用背景・等幅表示</strong></p>
              <ul>
                <li>OBSなどで文字のみ表示可能</li>
                <li>レイアウトが崩れない</li>
              </ul>
            </div>
            <div class="column">
              <figure class="image is-16by9">
                <img src="images/SyncTimer3.webp" alt="SyncTimer3" />
              </figure>
              <p><strong>設定を維持できる</strong></p>
              <ul>
                <li>URLを貼り付けるだけで同じ設定にできる</li>
                <li></li>
              </ul>
            </div>
          </div>
        </div>
      </section>
      <section class="section">
        <div class="container">
          <h2 class="title">使い方</h2>
          <button class="button is-info js-modal-trigger" data-target="howto-movie">使い方を動画で見る</button>
          <div id="howto-movie" class="modal">
            <div class="modal-background"></div>
            <div class="modal-content">
              <div id="yt-player"></div>
            </div>
            <button class="modal-close is-large" aria-label="close"></button>
          </div>
        </div>
      </section>

      <section class="section">
        <div class="container">
          <h2 class="title is-3">要望・不具合の報告</h2>
          <p>作者 Twitter または Github へご連絡ください</p>
          <div>
            <a href="https://twitter.com/mather314" class="button">Twitter</a>
            <a href="https://github.com/mather/sync-timer" class="button"
              >Github</a
            >
          </div>
        </div>
      </section>
    </main>
    <script>
      var windowWidth = window.innerWidth;
      console.log(windowWidth);
      var tag = document.createElement('script');

      tag.src = "https://www.youtube.com/iframe_api";
      var firstScriptTag = document.getElementsByTagName('script')[0];
      firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

      var player;
      function onYouTubeIframeAPIReady() {
        player = new YT.Player('yt-player', {
          width: '640',
          height: '360',
          videoId: 'm1Basm-TqGU',
          playerVars: {
            rel: 0,
          },
        });
      }

      document.addEventListener('DOMContentLoaded', () => {
        // Functions to open and close a modal
        function openModal($el) {
          $el.classList.add('is-active');
        }

        function closeModal($el) {
          $el.classList.remove('is-active');
          player.pauseVideo();
        }

        function closeAllModals() {
          (document.querySelectorAll('.modal') || []).forEach(($modal) => {
            closeModal($modal);
          });
        }

        // Add a click event on buttons to open a specific modal
        (document.querySelectorAll('.js-modal-trigger') || []).forEach(($trigger) => {
          const modal = $trigger.dataset.target;
          const $target = document.getElementById(modal);
          console.debug($target);

          $trigger.addEventListener('click', () => {
            openModal($target);
          });
        });

        // Add a click event on various child elements to close the parent modal
        (document.querySelectorAll('.modal-background, .modal-close, .modal-card-head .delete, .modal-card-foot .button') || []).forEach(($close) => {
          const $target = $close.closest('.modal');

          $close.addEventListener('click', () => {
            closeModal($target);
          });
        });

        // Add a keyboard event to close all modals
        document.addEventListener('keydown', (event) => {
          const e = event || window.event;

          if (e.keyCode === 27) { // Escape key
            closeAllModals();
          }
        });
      });
    </script>
    <script>
    </script>
  </body>
</html>
